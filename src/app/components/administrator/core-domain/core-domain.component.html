<h3 class="h3-header">Domain Configuration</h3>
<div class="form-tab">
  <div class="admin-container" style="height: 350px">
    <div class="user-inputs">
      <form (ngSubmit)="coreDomainSearch()">
        <label for="code">Code:</label>
        <input type="text" id="code" name="code" [(ngModel)]="code" />

        <label for="inputDescription">Description:</label>
        <input type="text" id="value" name="value" [(ngModel)]="description" />

        <button type="submit">Search</button>
      </form>
      <div class="admin-button">
        <button type="button" (click)="openAddDomainDialog()">
          Add Domain
        </button>
        <button type="button" (click)="updateDomain()" style="margin-left: 8px">
          Update
        </button>
      </div>
    </div>
    <div class="row mt-4">
      <div class="col-md-12">
        <table>
          <thead>
            <tr>
              <th>ID</th>
              <th>CODE</th>
              <th>DESCRIPTION</th>
              <th style="width: 150px">PREFERENCE_CODE</th>
              <th>sysCreatedDate</th>
              <th>sysCreatedBy</th>
              <th>sysUpdatedDate</th>
              <th>sysUpdatedBy</th>
              <th>Active Flag</th>
              <th></th>
            </tr>
          </thead>
          <tbody *ngIf="domainData?.length! > 0; else noData">
            <tr
              *ngFor="let domain of domainData"
              (click)="getDomainValuesData(domain.id!, domain)"
            >
              <td>{{ domain.id }}</td>
              <td
                contenteditable="true"
                (blur)="onTdBlur($event, domain, 'code')"
              >
                {{ domain.code }}
              </td>
              <td
                contenteditable="true"
                (blur)="onTdBlur($event, domain, 'description')"
              >
                {{ domain.description }}
              </td>
              <td
                contenteditable="true"
                (blur)="onTdBlur($event, domain, 'preference_code')"
              >
                {{ domain.preference_code }}
              </td>
              <td>{{ domain.createdDate | date : reportDateTimeFormat }}</td>
              <td>{{ domain.createdBy }}</td>
              <td>{{ domain.updateDate | date : reportDateTimeFormat }}</td>
              <td>{{ domain.updatedBy }}</td>
              <td>
                <input
                  type="checkbox"
                  name="active"
                  id="active"
                  [(ngModel)]="domain.sysActiveFlag"
                  (change)="onCheckboxChange(domain)"
                />
              </td>
              <td>
                <mat-icon (click)="deleteResource(domain.id!)">delete</mat-icon>
              </td>
            </tr>
          </tbody>
          <ng-template #noData>
            <tr>
              <td colspan="9">No data to display</td>
            </tr>
          </ng-template>
        </table>
      </div>
    </div>
  </div>
</div>

<div class="admin-container" style="height: 300px" *ngIf="showDomainValue">
  <app-core-domain-value
    [domainValues]="domainValuesList"
    [domain]="domain"
  ></app-core-domain-value>
</div>
